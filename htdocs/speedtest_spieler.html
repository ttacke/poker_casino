<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<script type="text/javascript" src="src/Casino/Besucher.js"></script>
		<script type="text/javascript" src="src/Casino/Spieler.js"></script>
		<script type="text/javascript" src="src/Casino/Croupier.js"></script>
		<script type="text/javascript" src="lib/jquery-1.9.1.min.js"></script>
		<script type="text/javascript" src="src/speedtest.js"></script>
		<script language="javascript" type="text/javascript">
			var spieler = null;
			
			$(function() {
				init();
			});
			function init() {
				logge('spieler', top.window.aktuelleSpielerNummer);
				spieler = new CasinoSpieler(top.window.aktuelleSpielerNummer, top.window.aktuelleSpielerNummer);
				spieler.derCroupierFragt = function(frage) {
					logge('status', 'spiele...');
					this._antworteDemCroupier((frage * 1) + 1);
				};
				spieler.betrete(top.window.casinoUrl, function() {
					warteAufTisch();
				});
			}
			function warteAufTisch() {
				logge('status', 'warte auf Tisch "' + top.window.tischName + '"...');
				spieler.zeigeOffeneTische(function(antwort) {
					var liste = antwort.details;
					for(var i = 0; i < liste.length;i++) {
						if(liste[i].tischName == top.window.tischName) {
							logge('status', "Tisch betreten...");
							spieler.spieleAnTisch(top.window.tischName, function(antwort) {
								if(antwort.status == 'ok') {
									logge('status', "Sitze am Tisch");
									return;
								} else {
									setTimeout('warteAufTisch()', 1000);
								}
							});
							return;
						}
					}
					setTimeout('warteAufTisch()', 1000);
				});
			}
		</script>
		<style>
			body {
				font-size: 0.7rem;
				padding: 0.2rem 0.3rem;
				margin: 0;
			}
		</style>
	</head>
	<body>
		#<span id="spieler">-</span>:<span id="status">starte...</span>
	</body>
</html>

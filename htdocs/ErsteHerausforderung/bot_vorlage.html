<!DOCTYPE html>
<!--

Anleitung
=========

Schnellstart
------------
Dieser Bot ist, wenn Ihr Name und Passwort anpasst und die Zeile "lösch mich" entfernt, direkt lauffähig.


Technische Regeln:
------------------
- Der Croupier spricht mit eurem Bot via WebSocket

- Der String, um sich beim Croupier anzumelden ist:
  "pDieErsteHerausforderung\n" + spielerName + "\n" + spielerPasswort

- Die Kombination Spielername und Passwort kann frei gewählt werden. Nach dem ersten betreten ist das
  Password gesetzt und kann nicht mehr geändert werden. Ohne das Passwort kann man also das Casino
  dann nicht mehr mit diesem Namen betreten.

- Hat die Verbindung geklappt, müsst ihr nur noch auf die Fragen des Croupiers antworten. Valide Antworten sind
  "fold", "check" und "raise". Alles andere wird als "fold" interpretiert.
  
- Ihr bekommt 150ms Zeit für eine Antwort (incl Netzwerk-Roundtrip-Zeit). Schafft ihr das nicht, wird für euch
  mit "fold" geantwortet.

- Bei 10 Timeouts in Folge werded ihr 3 Sekunden lang immer als "Timeout" gewertet. Warum? Ihr sollt die anderen
  Spieler nicht ausbremsen. Zeit ist hier quasi direkt Geld.


Spielregeln
-----------

- Grob ist es Texas Hold´em Poker mit Fixed Limit (LHE) https://de.wikipedia.org/wiki/Texas_Hold%E2%80%99em#Limits

- Der BigBlind ist 2, der Small Blind 1

- Euer Stack (= euer Geldhaufen) beginnt bei 0. Ihr könnt "beliebig" ins Negative und Positive gehen
  (mindestens +/-2.147.483.647, aber heutzutage mit 64bit sind es +/-9.223.372.036.854.775.807)

- Euch werden 5 Wettrunden gespielt: reflop, flop, turncard, river, showdown
  In welcher Runde ihr euch befindet, wird in der Frage des Croupiers in "Rundenname"
-->
<html>
	<head>
		<title>Vorlage eines Poker-Bots</title>
		<meta charset="utf-8" />
		<script type="text/javascript">
			var casinoUrl = 'ws:10.1.6.150:8080';
			var tischName = 'DieErsteHerausforderung';
			
			var spielerName = 'Dein Name';// bitte anpassen
			var spielerPasswort = 'Dein geheimes Passwort';// bitte anpassen
			
			
			Lösch mich, damit ich funktioniere. Aber erst Name und Passwort richtig einsetzen!
			
			
			var spieler_statistik = {};
			setInterval(function() {
				var statistik = [];
				for(var name in spieler_statistik) {
					var stack = spieler_statistik[name];
					if(spielerName == name) name = '<strong>' + name + '</strong>';
					statistik.push('<dt>' + name + '</dt><dd>' + stack + '</dd>');
				}
				document.body.innerHTML = '<h1>Spielstatistik</h1><dl>' + statistik.join('') + '</dl>';
			}, 1000);
			
			var ws = new WebSocket(casinoUrl);
			ws.onopen = function(event) {
				ws.onmessage = function(event) {
					if(event.data != 'o') {
						document.body.innerHTML = 'Betreten fehlgeschlagen';
						throw new Error('Betreten fehlgeschlagen');
					}
					ws.onmessage = function(event) {
						var frage = JSON.parse(event.data.substr(1, event.data.length));
						if(frage.Rundenname == 'showdown') {//preflop, flop, turncard, river, showdown
							ws.send('r' + 'ok');
							
							for(var i = 0;i < frage.Spieler.length; i++) {
								spieler_statistik[frage.Spieler[i].Name] = frage.Spieler[i].Stack;
							}
							return;
						}
						
						ws.send('r' + 'fold');//raise, check, fold
					}
				};
				ws.send('p' + tischName + "\n" + spielerName + "\n" + spielerPasswort);
			};
		</script>
	</head>
	<body>Starte...</body>
</html>

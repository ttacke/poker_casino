<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<script type="text/javascript">
			var casinoUrl = 'ws:10.1.6.150:8080';
			var tischName = 'DieErsteHerausforderung-20151215';
			var spielerName = 'Spieler B';
			var spielerPasswort = 'ewopcn1v03411xm3pugulkje';
			
			var ws = new WebSocket(casinoUrl);
			ws.onopen = function(event) {
				document.body.innerHTML = spielerName;
				ws.onmessage = function(event) {
					if(event.data != 'o') {
						throw new Error('Betreten fehlgeschlagen');
					}
					ws.onmessage = function(event) {
						var frage = JSON.parse(event.data.substr(1, event.data.length));
						if(frage.Rundenname == 'showdown') {//preflop, flop, turncard, river, showdown
							ws.send('r' + 'ok');
							return;
						}
						ws.send('r' + 'fold');//raise, check, fold
					}
				};
				ws.send('p' + tischName + "\n" + spielerName + "\n" + spielerPasswort);
			};
		</script>
	</head>
	<body></body>
</html>
